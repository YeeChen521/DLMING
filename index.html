<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: 'ZCOOL KuaiLe', cursive;
  }

  body {
    background: linear-gradient(to bottom, #d0f0ff, #ffffff);
    color: #333;
    padding: 30px 20px;
    min-height: 100vh;
  }

  nav.navigation {
    background-color: #e3f6ff;
    padding: 16px;
    display: flex;
    justify-content: center;
    gap: 30px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    margin-bottom: 30px;
  }

  nav.navigation a {
    text-decoration: none;
    color: #2d5b8a;
    font-weight: bold;
    font-size: 1rem;
    padding: 6px 10px;
    border-radius: 8px;
  }

  nav.navigation a:hover {
    background-color: #b6e6fa;
    color: #000;
  }

  h2, h1 {
    text-align: center;
    color: #2d5b8a;
    margin-bottom: 20px;
  }

  dialog {
    border: none;
    border-radius: 16px;
    padding: 20px 30px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    max-width: 500px;
    width: 90%;
    margin: auto;
    background: #fff;
  }

  .login button,
  form button,
  #continue {
    margin: 10px 5px 0 0;
    padding: 10px 16px;
    border: none;
    border-radius: 8px;
    background-color: #aadcee;
    color: #2d5b8a;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s ease;
  }

  .login button:hover,
  form button:hover,
  #continue:hover {
    background-color: #83d0f4;
  }

  label {
    display: block;
    margin: 12px 0 4px;
  }

  input[type="text"],
  select,
  textarea {
    width: 100%;
    padding: 8px;
    border: 1px solid #aadcee;
    border-radius: 8px;
    margin-bottom: 10px;
  }

  input[type="checkbox"],
  input[type="radio"] {
    margin-right: 6px;
  }

  textarea {
    resize: vertical;
  }

  .fanDialog, .mingDialog {
    margin-top: 40px;
  }

  .fanDialog h1 {
    margin-bottom: 5px;
  }

  dialog::backdrop {
    background: rgba(0, 0, 0, 0.3);
  }

  body::after {
    content: "ğŸ»";
    position: fixed;
    bottom: 20px;
    right: 24px;
    font-size: 2.5rem;
    opacity: 0.7;
    z-index: 999;
  }

  @media (max-width: 600px) {
    nav.navigation {
      flex-direction: column;
      align-items: center;
    }

    dialog {
      padding: 15px 20px;
    }
  }
</style>

    </style>
  </head>
  <body>
    <div class="login">
      <dialog class="loginDialog">
        <p>è¯·é€‰æ‹©ä½ çš„èº«ä»½ï¼š</p>
        <button id="bear" onclick="forFan()">å°å›°ç†Š</button>
        <button id="streamer" onclick="forMing()">DL.æ˜</button>
      </dialog>
    </div>

    <div class="fan">
      <dialog class="fanDialog" id="fanIntro">
        <h1>å¿«é—®å¿«ç­”</h1>
        <h6>åªæœ‰ç­”å¯¹4é¢˜ä»¥ä¸Šæ‰å¯è¿›å…¥å“¦</h6>
        <button id="continue">ç»§ç»­</button>
      </dialog>

      <dialog class="fanDialog" id="fanQuestion">
        <form method="dialog">
          <label for="F1">1.è¯·é—®DL.æ˜çš„ç”Ÿæ—¥æ˜¯ä»€ä¹ˆæ—¶å€™å‘¢ï¼Ÿ (æ ¼å¼ MM-DD)</label>
          <input
            type="text"
            name="F1"
            id="F1"
            placeholder="è¯·è¾“å…¥"
            pattern="\d{2}-\d{2}"
            required
          />

          <p>2.è¯·é—®ä¸‹é¢é‚£ä¸ªæ˜¯DL.æ˜çš„åŸåˆ›æ­Œæ›²å‘¢ï¼Ÿ ï¼ˆå¤šé€‰é¢˜ï¼‰</p>
          <label><input type="checkbox" name="song" value="æš´é›¨å¤©æ”¶ä»¶äºº" /> æš´é›¨å¤©æ”¶ä»¶äºº</label><br />
          <label><input type="checkbox" name="song" value="Coco" /> Coco</label><br />
          <label><input type="checkbox" name="song" value="æ­Œç¤¼" /> æ­Œç¤¼</label><br />
          <label><input type="checkbox" name="song" value="ç™¾åˆ†ç™¾çš„çˆ±" /> ç™¾åˆ†ç™¾çš„çˆ±</label><br />
          <label><input type="checkbox" name="song" value="æš´é£é›¨æ”¶ä»¶äºº" /> æš´é£é›¨æ”¶ä»¶äºº</label><br />

          <label for="F3">3.è¯·é—®DL.æ˜çš„å®˜æ–¹åŠ¨ç‰©å¡‘æ˜¯ä»€ä¹ˆï¼Ÿ</label>
          <select id="F3" name="F3" required>
            <option value="">---è¯·é€‰æ‹©----</option>
            <option value="é¸­å­">é¸­å­</option>
            <option value="åˆšå­">åˆšå­</option>
            <option value="å°çŒª">å°çŒª</option></select
          ><br />

          <label for="F4"
            >4.
            è¯·é—®DL.æ˜åœ¨ä¸‹åˆ—é‚£ä¸ªåœ°ç‚¹è¯´è¿‡â€œæ„Ÿæƒ…æ‰æ˜¯è¿™ä¸ªä¸–ç•Œä¸Šæœ€æ®‹å¿çš„ä¸œè¥¿â€è¿™å¥è¯å‘¢ï¼Ÿ</label
          >
          <select id="F4" name="F4" required>
            <option value="">---è¯·é€‰æ‹©----</option>
            <option value="é…’åº—æˆ¿é—´">é…’åº—æˆ¿é—´</option>
            <option value="ä¸Šæµ·è¿ªå£«å°¼">ä¸Šæµ·è¿ªå£«å°¼</option>
            <option value="å¯†å®¤">å¯†å®¤</option>
            <option value="ktv">ktv</option></select
          ><br />

          <label for="F5">5. è¯·é—®DL.æ˜çš„åˆ«åœ¨3Dçš®å¥—çš„å¤´å‘ä¸Šçš„ç‰©ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</label>
          <select id="F5" name="F5" required>
            <option value="">---è¯·é€‰æ‹©----</option>
            <option value="å°ç†Š">å°ç†Š</option>
            <option value="å¸ç‹èŸ¹">å¸ç‹èŸ¹</option>
            <option value="é¸­å­">é¸­å­</option>
            <option value="ç«ç‘°èŠ±">ç«ç‘°èŠ±</option></select
          ><br />

          <button type="submit" id="fanSubmit">æäº¤</button>
        </form>
      </dialog>


    </div>

    <div class="ming">
      <dialog class="mingDialog">
        <form method="dialog">
          <p>1. DL.æ˜èº«é«˜æ˜¯ä¸æ˜¯2.1m?</p>
          <label> <input type="radio" name="q1" value="yes" /> æ˜¯ </label>
          <label> <input type="radio" name="q1" value="no" /> ä¸æ˜¯ </label>

          <p>2.DL.æ˜æ˜¯ä¸æ˜¯æœ€å® å°å›°ç†Šçš„äººï¼Ÿ</p>
          <label> <input type="radio" name="q2" value="yes" /> æ˜¯ </label>
          <label> <input type="radio" name="q2" value="no" /> ä¸æ˜¯ </label>

          <p>3. DL.æ˜æ˜¯ä¸æ˜¯è¶…æ£’çš„</p>
          <label> <input type="radio" name="q3" value="yes" /> æ˜¯ </label>
          <label> <input type="radio" name="q3" value="no" /> ä¸æ˜¯ </label>

          <p>4. DLæ˜æ˜¯ä¸æ˜¯æœ€å¥½çš„å°é¸­å­</p>
          <label> <input type="radio" name="q4" value="yes" /> æ˜¯ </label>
          <label> <input type="radio" name="q4" value="no" /> ä¸æ˜¯ </label>

          <p>5. DL.æ˜å’Œå°å›°ç†Šä¸€å®šä¼šå¤©å¤©è§çš„æ˜¯å—ï¼Ÿ</p>
          <label> <input type="radio" name="q5" value="yes" /> æ˜¯ </label>
          <label> <input type="radio" name="q5" value="no" /> ä¸æ˜¯ </label
          ><br />

          <button type="submit" id="mingSubmit">æäº¤</button>
        </form>
      </dialog>

    </div>
    <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-auth-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyA8PhigBv9x4vKZEeWoG2kod60r33_WuEI",
        authDomain: "ming-c76e4.firebaseapp.com",
        projectId: "ming-c76e4",
        storageBucket: "ming-c76e4.appspot.com",
        messagingSenderId: "614393927191",
        appId: "1:614393927191:web:1645910ae7995979526e52",
      };

      firebase.initializeApp(firebaseConfig);
      const loginDialog = document.querySelector(".loginDialog");
      const bear = document.getElementById("bear");
      const ming = document.getElementById("streamer");
      const fanSubmit = document.getElementById("fanSubmit");

      window.onload = () => {
        loginDialog.showModal();
      };

      function forFan() {
        const fanIntro = document.querySelector("#fanIntro");
        fanIntro.showModal();

        const continuebtn = document.getElementById("continue");
        continuebtn.addEventListener("click", () => {
          const fanQuetion = document.querySelector("#fanQuestion");
          fanQuetion.showModal();
        });
      }

      const mingSubmit = document.getElementById("mingSubmit");

      function forMing() {
        const fanIntro = document.querySelector("#fanIntro");
        fanIntro.showModal();
        
        const continuebtn = document.getElementById("continue");
        continuebtn.addEventListener("click",() => {
          const mingDialog = document.querySelector(".mingDialog");
        mingDialog.showModal();
        })
      }

      bear.addEventListener("click", () => {
        loginDialog.close();
          forFan()
      });
      ming.addEventListener("click", () => {
        loginDialog.close();
          forMing()
      });

      fanSubmit.addEventListener("click", (e) => {
        e.preventDefault();
        let correctQ = 0;

        const F1 = document.getElementById("F1").value;
        if (F1 === "06-30") {
          correctQ++;
        }

        const OriginalSongs = Array.from(
          document.querySelectorAll('input[name="song"]:checked')
        ).map((cb) => cb.value);
        const correctedSong = ["æš´é£é›¨æ”¶ä»¶äºº", "ç™¾åˆ†ç™¾çš„çˆ±"];
        const isCorrect =
          OriginalSongs.length === correctedSong.length &&
          correctedSong.every((song) => OriginalSongs.includes(song));
        if (isCorrect) correctQ++;

        const F3 = document.getElementById("F3").value;
        if (F3 === "é¸­å­") correctQ++;

        const F4 = document.getElementById("F4").value;
        if (F4 === "å¯†å®¤") correctQ++;

        const F5 = document.getElementById("F5").value;
        if (F5=== "é¸­å­")correctQ++;

        if (correctQ >= 4) {

          firebase
            .auth()
            .signInAnonymously()
            .then(() => {
              sessionStorage.setItem("identity", "fan");
              window.location.href = "main.html";
            })
            .catch((error) => {
              console.error("ç™»å½•å¤±è´¥", error);
              alert("ç™»å½•å¤±è´¥ï¼š" + error.code + "\n" + error.message)
            });
        } else {
          alert("è‡³å°‘ç­”å¯¹å››é¢˜æ‰èƒ½è¿›å…¥å°å›°ç†Šä¹‹å®¶å“¦ï¼");
        }
      });

      mingSubmit.addEventListener("click", (e) => {
        let correctM = 0;
        e.preventDefault();

        const q1 = document.querySelector('input[name="q1"]:checked')?.value;
        if (q1 === "yes") correctM++;

        const q2 = document.querySelector('input[name="q2"]:checked')?.value;
        if (q2 === "yes") correctM++;

        const q3 = document.querySelector('input[name="q3"]:checked')?.value;
        if (q3 === "yes") correctM++;

        const q4 = document.querySelector('input[name="q4"]:checked')?.value;
        if (q4 === "yes") correctM++;

        const q5 = document.querySelector('input[name="q5"]:checked')?.value;
        if (q5 === "yes") correctM++;

        if (correctM >= 4) {
;
          firebase
            .auth()
            .signInAnonymously()
            .then(() => {
              sessionStorage.setItem("identity", "ming");
              window.location.href = "main.html";
            })
            .catch((error) => {
              console.error("ç™»å½•å¤±è´¥", error);
              alert("ç™»å½•å¤±è´¥ï¼š" + error.code + "\n" + error.message)
            });
        } else {
          alert("è‡³å°‘ç­”å¯¹å››é¢˜æ‰èƒ½è¿›å…¥å°å›°ç†Šä¹‹å®¶å“¦ï¼");
        }
      });
    </script>
  </body>
</html>
